<% layout('layouts/boilerplate') -%>
<% if (success && success.length) { %>
  <div class="alert alert-success alert-dismissible fade show" role="alert">
    <%= success[0] %>
    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
  </div>
<% } %>
<% if (error && error.length) { %>
  <div class="alert alert-danger alert-dismissible fade show" role="alert">
    <%= error[0] %>
    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
  </div>
<% } %>;


<div class="container mt-4">
  <h2 class="mb-4">All Listings</h2>

  <div class="row row-cols-lg-4 row-cols-md-2 row-cols-sm-1 g-4">
    <% for (let listing of listings) { %>
      <div class="col">
        <a href="/listings/<%= listing._id %>" class="listing-link" style="text-decoration: none;">
          <div class="card listing-card">
            <img
              src="<%= listing.image.url %>"
              class="card-img-top"
              alt="listing_image"
            />

            <div class="card-body">
              <p class="card-text">
                <b><%= listing.title %></b><br />
                &#8377; <%= listing.price.toLocaleString("en-IN") %> / night
              </p>
            </div>
          </div>
        </a>
      </div>
    <% } %>
  </div>
</div>
